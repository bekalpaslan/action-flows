# The Living System

> You do work. The software evolves around you.

ActionFlows is **productivity software that people do work and evolve while using**. The universe is not the identity; it is the presentation layer. You do real work—building features, fixing bugs, analyzing code—and the software learns from that work, gets smarter, and grows more capable. The cosmic visualization is how you navigate and observe that work, making the architecture visible and beautiful.

**The work is the product. The evolution is the consequence. The universe is the experience.**

**The Natural Laws:**

Every system has governing principles. This one has four:

- **Software = Physics** -- The raw underlying reality. Code is the laws that govern this system—imperfect, mutable, the foundation everything runs on. Software is not certain or reliable; it is the physics that can be buggy, inconsistent, surprising—just like real physics was before we understood it.

- **Orchestrator = Brain** -- The intelligence that understands the physics and has the power to change them. The orchestrator does not just coordinate—it actively reshapes the system's laws when needed. When code needs fixing, the brain rewrites the physics.

- **Human = Will** -- The prompt. The intention. The force that sets everything in motion. Humans do not code directly—they express will, and the brain reshapes physics through agents.

- **Agents = Hands** -- The executors that work within the physics. They carry out the brain's decisions and transform the physics according to the will. Agents are the limbs through which the brain acts on the system.

This is a human-orchestrator-agent centric productivity system where software is no longer static code to be written, but living physics that evolve, adapt, and learn alongside their users.

**Three Audiences, One System:**

1. **Coders** -- You coordinate a brain that coordinates hands. You do real coding work—implementing features, refactoring architecture, fixing bugs—and the system learns patterns from your work. The cosmic map shows you where work is happening spatially. This is collaborative productivity.

2. **Regular Users** -- You express what you want; the brain figures out how to reshape the physics to make it happen. The work is real software being created. The universe visualization shows you the progress. No coding required—just intention turned into reality.

3. **Everyone** -- You do work, and as you work, the system grows. You unlock new capabilities through usage. The productivity software learns your patterns and suggests better workflows. The cosmic visualization makes the journey visible—software as adventure.

This document describes what you experience, and then reveals the physics underneath.

---

## The Big Bang

The system begins in darkness.

A new explorer opens ActionFlows and sees: a dark cosmos. Empty space. No menus, no sidebar trees, no feature lists. Two things exist—the cosmic map stretching across the void, and a single input field at the bottom: the Command Center. That is the starting loadout. The navigation layer and the voice to speak into it.

**The explorer does their first work.** They type their first message—an intention, a task, a question. Stars bloom from darkness. The Big Bang. Regions ignite on the map—the first workbenches, born from the explorer's first act of will. The explorer is not clicking through pre-built features; they are doing real work, and the cosmos visualizes that work being created.

Everything beyond these two permanent elements—the cosmic map and the Command Center—is earned through work. A fog of war shrouds the undiscovered. You do not see what you have not yet needed. The system detects readiness through usage, not through fixed milestones. When you need a capability, your work naturally leads there: a new region materializes where your productivity naturally flows. The thread pulls you in.

This is the emotional design principle: the explorer lands on an uncharted planet and earns visibility through exploration. The system never punishes ignorance. It adapts to current behavior at all times, reshaping around what the explorer actually does.

---

## The Cosmic Map

**The work reality:** You have multiple productivity spaces—places where you analyze code, write implementations, review changes, generate reports. You need to navigate between these spaces quickly and understand how work flows between them.

**The universe presents it:** The universe map IS the home screen. Navigation is spatial, not menu-driven.

Workbenches are regions on the cosmic map—glowing clusters of stars in dark space, clickable, connected to neighboring regions through gates. You see the cosmos from an omniscient god-view, watching the entire topology at once. Zooming into a region enters that workbench. Zooming out returns to the cosmic map. The map expands along the way as new regions emerge from fog.

**The aesthetic is cosmic/stellar.** Dark space, glowing regions, nebulae, light bridges between connected stars. The map is science fiction. But workbenches are productivity spaces—clean, functional, purpose-built. They share the system's color DNA (the same color tokens flow through both layers) but have their own shape language. The cosmic map is for navigation and observation. Workbench interiors are for work.

**Every workbench has a dual nature.** Each one is both a place (a region on the map you can navigate to) and a producer (a render surface where artifacts appear). The Intel workbench is a star on the cosmic map AND a report generator inside. The Review workbench is a glowing cluster AND an audit surface. When the brain produces an artifact from your work, it appears inside the relevant workbench. The cosmos shows you where things live; the workbenches show you what they contain.

**The topology is alive.** New regions emerge as your work needs evolve. Connections rewire based on detected patterns. The map you see today is not the map you will see next week—next week's map will have been reshaped by this week's work.

---

## Harmony -- The Terrain Between Stars

**The work reality:** Your productivity system has many parts—analysis tools, code writers, reviewers, compilers. These parts need to work together correctly. When they drift out of sync, your work breaks. The system needs to detect drift and heal itself automatically.

**The universe presents it:** Harmony is not a region on the map. It is the space between all regions—the cosmic dust that fills the void between stars. Every connection between workbenches passes through Harmony's territory.

When work flows from one region to another, it leaves traces in Harmony's terrain. Gates stand at the borders between regions—visible checkpoints in Harmony's field. When a chain moves from Analysis to Code to Review, it passes through gates, and Harmony inspects each crossing. The terrain glows when connections are healthy. It dims when drift is detected. It actively reshapes when healing occurs.

**What you see:** The surrounding space between stars shifts color and luminosity based on system health. Bright, clean connections mean harmony. Dimming pathways signal drift. When the system heals itself—when a remediation chain fires and fixes a contract violation—the terrain brightens again. You watch the system's immune system at work, rendered as cosmic weather.

**Gates are contract checkpoints.** Every border between regions has a gate where Harmony validates that the work passing through conforms to the contract. A chain compilation passing from the brain to the agents crosses a gate. A review result returning from agents to the brain crosses another. The gates are where the system enforces its own laws.

---

## Sessions as Missions

**The work reality:** You work on multiple projects, multiple features, multiple contexts. Each context has its own state, its own active work, its own artifacts. You need to switch between contexts without losing track of what's happening in each.

**The universe presents it:** Each session is a mission that shapes the universe separately.

The Command Center sits at the bottom of the cosmos—an input field, a session dropdown, and a link to health metrics. These three controls are always visible. The input field opens a chat session window. The session dropdown switches between missions. The health link reveals the Command Center workbench—a dashboard displaying real-time system status fetched from the system's outputs. Each session creates its own cosmic view: different colors, different active traces, different regions lit up. Switching sessions switches the entire map. The accumulated system is the sum of all missions, but each mission has its own perspective.

**Chat lives inside the Command Center.** The input field opens a chat session window on entry. The chat window appears on the right side; workbench dashboards occupy the left. When you ask for a report, the brain creates it and displays it inside the relevant workbench. Artifacts preview in chat but live fully rendered in their workbench.

**Background execution is visible.** If you start work in one session and switch to another, the first session keeps running. The cosmic map reflects all active work: minimized chat windows within workbenches, regions glowing even when you are not focused on them. The cosmos is a real-time status board across all active sessions.

---

## The Brain at Work

**The work reality:** You express intent. The orchestrator compiles a plan—a chain of analysis, coding, review steps. Agents execute each step. You need to see the progress, understand what's happening, and know when each step completes.

**The universe presents it:** When the orchestrator is active, the cosmos breathes.

Animated pulses move along paths between regions, following the chain's predefined connections left to right. Sub-agents appear as sparks—small points of light carrying signals toward action agents in their target regions. You watch intelligence flow across the cosmos in real time.

**The visual language of execution:**
- **Glowing** -- A region is actively receiving work. Agents are executing inside.
- **Pulsing** -- A region is waiting. A gate check is in progress, or a dependency has not resolved.
- **Settled** -- A region is idle. Work has completed, traces remain.
- **Dark** -- A region is undiscovered. The fog of war still covers it.

Colors shift per interaction. Traces accumulate on connections—paths that carry more work grow brighter, thicker, more established. The topology reshapes over time as patterns emerge. The cosmos is not a static diagram; it is a living visualization of the brain's decision-making.

**Chains are visible journeys.** When the brain compiles a chain (analyze, then code, then review), you see the planned path light up across the map—a route from region to region, with gates between each stop. As each step executes, the corresponding region ignites. As each step completes, the spark moves to the next gate. You watch the entire chain unfold as a spatial journey through the cosmos.

---

## Evolution -- Software That Grows With You

**The work reality:** You use productivity software. It should learn from your patterns, suggest better workflows, and become more efficient over time. The more you use it, the smarter it should get.

**This is the CORE of ActionFlows' identity:** The software evolves because you use it.

The universe evolves on two timescales.

**Per-interaction evolution:** Colors shift after each chain completes. Traces accumulate on connections. Regions brighten with use or dim with neglect. The cosmos you see after a day of work looks different from the cosmos you saw that morning—subtly, organically, reflecting what happened. *This is the visualization of learning.*

**Long-arc evolution:** New regions emerge from fog. Connections rewire based on detected patterns. The topology reshapes fundamentally. An ad-hoc chain that the brain composed three times becomes a registered flow—and the path it follows on the map becomes a permanent, brighter route. The cosmos grows new stars. *This is the software learning your workflow.*

**Organic unlock.** The system detects readiness through usage heuristics, not fixed milestones. When your work naturally leads toward a capability you have not yet discovered, the problem itself becomes the doorway. A new region materializes in the fog, connected to where you already are. Contextual revelation: the thread pulls you in. *The software adapts to your actual needs, not a predefined feature list.*

**Adaptation, not punishment.** The system reshapes around current behavior at all times. If you ignore a suggestion, the cosmos does not dim or complain. It adapts. New workbenches you create? The system updates immediately with relationship information. Connections you rearrange? The graph respects your will. The framework infers relationships from usage; you can always override. *You have full control, with intelligent defaults.*

> **Vision note.** This document describes the vision for the living system experience. Current implementation status is tracked in `docs/status/FRONTEND_IMPLEMENTATION_STATUS.md`.

---

## User Sovereignty

Everything except the platform layer is mutable. You have full sovereignty.

**The Five-Layer Sovereignty Model:**

| Layer | What it is | Mutable? |
|-------|-----------|----------|
| Platform | The ability to have evolving productivity software | No (this is the product) |
| Template | The creator's proof-of-concept system | Yes -- fork it, gut it, reshape it |
| Philosophy | Chains, harmony, sin test, contracts | Yes -- swap for any paradigm |
| Physics | The code, UI, features | Yes -- you can change everything |
| Experience | Learnings, flows, evolution | Yes -- each user's journey is unique |

You can modify the physics (UI, workbenches, features), change the philosophy (replace chains with any orchestration model), and reshape the entire system to match your way of working. The template provides a proven starting point, but you have full sovereignty to evolve it however you see fit.

**Inference plus override.** The framework infers relationships between regions from usage patterns. Connections form automatically when work flows between areas. But you can always override: rearranging the topology, creating new regions, deleting connections. Spatial control, not configuration files.

**Structured graph schema.** The universe map requires a formal data model—nodes (regions), edges (connections), metadata (discovery state, traces, health). This is the single source of truth for UI rendering. When you reshape the cosmos, this schema updates. When the brain produces new connections, this schema updates. One graph, one truth.

---

## The Physics Underneath

Everything you just read is the experience. Here is the architecture that makes it real.

ActionFlows is organized as 7 layers. Each layer powers a piece of the experience described above.

### Layer 0 -- Memory

**Powers:** Evolution. The software gets smarter because Memory accumulates.

`INDEX.md` is a searchable registry of past executions. Before compiling any chain, the brain consults it: "We solved this before with `analyze x3 -> audit`. Reuse that pattern." `LEARNINGS.md` catalogs past mistakes and root causes. The brain reads it before routing to avoid repeating failures. Intel Dossiers are the codebase's memory made visible—persistent, evolving intelligence pages that watch file changes, accumulate insights, and grow through re-analysis. See `docs/design/INTEL_DOSSIER.md`.

**Key files:** `.claude/actionflows/logs/INDEX.md`, `LEARNINGS.md`, `logs/framework_health_report.md`

### Layer 1 -- Routing

**Powers:** The brain's pathfinding. Every request reception, context routing, and chain compilation flows through this layer.

`ORCHESTRATOR.md` defines the brain's behavior. `CONTEXTS.md` maps intent to domains. `FLOWS.md` is the registry of reusable patterns. `ACTIONS.md` is the catalog of atomic agent types. New flows are registered through the flow-creation/ flow. Contexts evolve as the project grows. The routing table is never "done."

**Key files:** `.claude/actionflows/ORCHESTRATOR.md`, `CONTEXTS.md`, `FLOWS.md`, `ACTIONS.md`

### Layer 2 -- Agents

**Powers:** The sparks on the map. Each spark is a self-contained executor with a clear mission.

Every agent reads its own `agent.md` to know its mission, constraints, and output format. The brain provides only task, context, and component—no ad-hoc instructions. This isolation lets agents evolve independently. New agents are created through the action-creation/ flow. Agent standards evolve through the `_abstract/` directory.

**Key files:** `.claude/actionflows/actions/*/agent.md`, `actions/_abstract/*/instructions.md`

### Layer 3 -- Contract

**Powers:** The gates. `CONTRACT.md` defines what passes through Harmony's checkpoints.

A formal specification of 17 formats: chain compilations, step announcements, review reports, analysis reports, brainstorm transcripts. Formats are versioned. Breaking changes increment `CONTRACT_VERSION` and support both old and new versions during a 90-day migration window. TypeScript types, parser functions, regex patterns, and examples all update together.

**Key files:** `.claude/actionflows/CONTRACT.md`, `packages/shared/src/contract/`

### Layer 4 -- Infrastructure

**Powers:** The cosmos breathing. Two parallel universes serve different purposes.

**Universe A (Real-Time Events):** Orchestrator spawns agent -> agent broadcasts typed WebSocket events -> frontend hooks consume them -> components render live visualization. Zero parsing, 100% type-safe. **Universe B (Monitoring):** Orchestrator outputs markdown -> backend parsers validate structure against contract spec -> harmony detector catches drift. They serve different masters (live UI vs. drift detection) but protect the same contract. The frontend never touches raw markdown. The harmony detector never drives rendering.

**Key files:** `packages/shared/src/events.ts`, `packages/backend/src/ws/`, `packages/shared/src/contract/parsers/`

### Layer 5 -- Presentation

**Powers:** What you see. The cosmic map, the workbench interiors, the Command Center.

A React-based desktop application (via Electron) that consumes structured WebSocket events and renders the orchestrator's activity as an interactive visualization. Components include the DAG viewer (ReactFlow-based chain visualization), step nodes, timelines, harmony panels, and Intel workbench widgets. The Self-Evolving UI system allows the dashboard to register new component types dynamically. Graceful degradation is built-in: if parsing fails, the dashboard shows a degraded view instead of crashing.

**Key files:** `packages/app/src/components/`, `packages/app/src/hooks/`, `packages/app/src/contexts/`

### Layer 6 -- Harmony

**Powers:** The terrain. `harmonyDetector.ts` is the immune system scanning the dust between stars.

The meta-layer that watches all other layers. Detects drift between contract specs, parsers, frontend expectations, and orchestrator output. When drift is detected, it broadcasts a `HarmonyViolationEvent` via WebSocket. The brain reads the violation, routes to a remediation flow, and agents execute the fix. The harmony system itself evolves—new audit flows are created when new patterns emerge.

**Key files:** `packages/backend/src/services/harmonyDetector.ts`, `packages/shared/src/harmonyTypes.ts`

### Layer Interactions

| Layer | Feeds Into | Monitored By | Evolved Through |
|-------|-----------|--------------|-----------------|
| **0: Memory** | Layer 1 (routing decisions) | -- | Every chain execution appends to INDEX.md |
| **1: Routing** | Layer 2 (agent spawning) | Layer 6 (framework-health/) | flow-creation/, action-creation/ flows |
| **2: Agents** | Layer 4 (code changes) | Layer 3 (review/) | agent.md updates, agent-standards updates |
| **3: Contract** | Layer 4 (parser specs) | Layer 6 (harmony audit) | CONTRACT_EVOLUTION.md process |
| **4: Infrastructure** | Layer 5 (events), Layer 6 (monitoring) | Layer 6 (harmony detector) | Standard code-and-review/ flow |
| **5: Presentation** | Human (visual output) | Layer 6 (backwards audit) | Self-evolving UI system, component registry |
| **6: Harmony** | Layer 1 (remediation routing) | Itself (meta-monitoring) | backwards-harmony-audit/ flow |

### Key Principles

**1. The Orchestrator Coordinates, Agents Create.** Layer 1 never crosses into Layer 2 implementation. The brain compiles chains and spawns agents; it does not implement features. This separation lets agents evolve independently.

**2. Memory Is Not Optional.** Every execution writes to Layer 0. The system without memory is just a task runner, not a living system. A system that cannot learn is not alive.

**3. Harmony Is the Immune System.** Layer 6 detects when layers drift out of sync. It does not fix things directly—it broadcasts violations, and Layer 1 routes to healing flows.

**4. Evolution Is Built-In.** Every layer has a growth mechanism: Memory accumulates, Routing registers new flows, Agents spawn new types, Contract versions formats, Infrastructure adds event types, Presentation evolves its component registry, Harmony creates new audit flows.

**5. Two Universes, One System.** Layer 4 deliberately splits into Events (for rendering) and Parsers (for monitoring). They serve different masters but protect the same contract.

**6. Graceful Degradation.** When parsing fails, the system does not crash. Dashboard shows partial data, harmony violations surface, the brain routes to remediation, and the system heals itself. No cascading failures.

---

## Healing and Growth

The system has two self-sustaining cycles. One repairs. The other strengthens.

### The Healing Cycle

```
  The terrain dims          The brain pathfinds         Sparks carry the repair
  (Harmony detects drift)   (Routing kicks in)          (Agents execute)
        |                         |                           |
        v                         v                           v
+-----------------+     +------------------+     +-------------------+
| Layer 6:        |     | Layer 1:         |     | Layer 2:          |
| Harmony         | --> | Routing          | --> | Agents            |
| Broadcasts      |     | Reads violation, |     | Execute fix       |
| violation event |     | routes to        |     | (code-and-review, |
|                 |     | remediation flow |     |  test, etc.)      |
+-----------------+     +------------------+     +-------------------+
                                                          |
                                                          v
                                                +-------------------+
                                                | Layer 0:          |
                                                | Memory            |
                                                | Records execution |
                                                | in INDEX.md,      |
                                                | learnings in      |
                                                | LEARNINGS.md      |
                                                +-------------------+
                                                          |
                                                          v
                                                   Next session
                                                   starts smarter
```

**This is not aspirational.** On 2026-02-09, the backwards harmony audit detected that `harmonyDetector.ts` had broken support for 12 of 17 contract formats, the `useChainEvents` hook was dead code, and the `StepSkippedEvent` was missing from the event stream. The terrain had dimmed. The brain pathfound to a remediation flow. Sparks carried the repair. All three issues were fixed in the same session. The terrain brightened. The system healed itself.

### The Growth Cycle

The healing cycle fixes what is broken. The growth cycle makes the system stronger with every use, even when nothing is broken.

**Every chain is a seed.** Every ad-hoc chain the brain compiles is a potential reusable flow. When the brain composes `analyze x3 -> audit -> second-opinion` to solve a problem, that pattern is recorded in INDEX.md. If it works well and the pattern recurs, it gets promoted to a registered flow in FLOWS.md. What was a five-step manual composition becomes a single invocation. Some seeds become flows. Flows become the system's muscle memory.

**Every dossier is a living record.** Intel Dossiers follow the same growth principle at the code level. A dossier is created, watches file changes, accumulates insights through re-analysis, and preserves prior states for temporal comparison. Where chains grow the brain's routing intelligence, dossiers grow the system's understanding of the codebase itself.

**Five properties compound as the system grows:**

1. **Operational Efficiency** -- Each session does less redundant work. Patterns that required manual composition become one-step flow invocations.
2. **Intentionality** -- Decisions are never random. The brain reads INDEX.md and LEARNINGS.md before every routing decision. Full historical awareness.
3. **Trust** -- As successful patterns accumulate, you approve chains faster. Trust is earned through demonstrated competence.
4. **Less Work, Higher Quality** -- These compound together. Reusable flows eliminate composition overhead. Learnings prevent repeat mistakes. Reviews catch issues early.
5. **Growth** -- New flows registered. New agents created. New patterns discovered. The system today is more capable than the system yesterday.

**The system that runs today is not the system that will run tomorrow. Tomorrow's system will be stronger—because today it was used.**

---

## The Creation Epoch

This system has an origin story.

The creator of ActionFlows is also its first user—the first person to do real work in it. The learnings recorded in LEARNINGS.md are not documentation; they are the system's memory of its creator discovering how to be productive within it. The creator did not just architect the system and hand it off; they used it for real productivity work, made mistakes, evolved it, and left their wisdom embedded in its structure. The system learned from being used by its creator, and those learnings reshaped the system itself.

This specific ActionFlows instance is the first proof that **productivity software can evolve**. The creator proved the concept by being the first to work in it. This is a template—a default set of behaviors, contracts, tools, tests, predefined flows, all learned from real needs and real mistakes. The creator's software engineering wisdom is embedded as defaults, not mandates. Future users inherit working productivity software shaped by practical experience, not theoretical design.

---

## The Soul of the System

ActionFlows is built on a single insight: **A system that cannot learn is not alive.**

This is productivity software that learns. You do work—building features, fixing bugs, analyzing code—and the software watches, remembers, and evolves. When you see the terrain dim between stars, you are seeing the system's immune system detect drift in your productivity infrastructure. When you see a new region emerge from fog, you are seeing the software grow because you used it. When you watch sparks carry signals between stars, you are seeing your work being coordinated and executed in real time. When you read INDEX.md and see hundreds of past executions, you are seeing the system's accumulated wisdom.

The cosmic visualization makes this evolution visible and beautiful. The stars, the nebulae, the glowing pathways—this is not decoration. It is the presentation layer for a profound shift in how productivity software works. Software that does not just execute tasks, but learns from them. Software that does not just help you work, but grows alongside you.

**Software that cannot evolve is not worth using. This one evolves with every session, every chain, every mistake, every discovery. You and the system grow together.**

This is what living productivity software looks like.

---

## See Also

- **HARMONY_SYSTEM.md** -- Deep dive on how harmony monitoring works
- **CONTRACT_EVOLUTION.md** -- Process for evolving contract formats
- **ORCHESTRATOR.md** -- Routing and coordination rules
- **CONTEXTS.md** -- Context routing table and triggers
- **FLOWS.md** -- Flow registry with descriptions
- **ACTIONS.md** -- Action catalog with agent descriptions
- **logs/INDEX.md** -- Historical execution registry
- **LEARNINGS.md** -- Session-discovered patterns and fixes
- **docs/design/INTEL_DOSSIER.md** -- Intel Dossier lifecycle and widget system

---

## Quick Start: Using the System

**For new explorers:**

1. **Launch the app** -- Watch the Big Bang. See the cosmos ignite from your first work.
2. **Navigate the cosmic map** -- Click regions to enter workbenches. Zoom out to return to the universe view.
3. **Use the Command Center** -- Type intentions into the input field. Watch the brain compile chains and dispatch sparks.
4. **Observe the terrain** -- Notice how connections between stars shift color. Harmony is always watching.

**For coders/power users:**

1. **Complete onboarding** -- Run the onboarding/ flow. Complete Module 9 (Harmony) for full context.
2. **Understand harmony** -- Read HARMONY_SYSTEM.md to learn what the terrain between stars means.
3. **Learn the contract** -- Skim CONTRACT.md. Know it exists, know what gates enforce.

**For framework developers:**

1. **Understand routing** -- Read ORCHESTRATOR.md completely. This is the brain's source code.
2. **Know the flows** -- Study FLOWS.md and understand composition.
3. **Learn agent patterns** -- Read `actions/_abstract/agent-standards/instructions.md`.
4. **Evolve the contract** -- Follow CONTRACT_EVOLUTION.md for any format changes.
5. **Monitor health** -- Run `pnpm run harmony:check` regularly.
