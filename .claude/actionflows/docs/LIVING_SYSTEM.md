# The Living Universe

> You do work. The universe evolves around you.

ActionFlows is a productivity universe. Not a framework you configure, not a tool you learn, not a dashboard you read. A universe you inhabit. You express intention, and the cosmos reshapes itself to manifest it. You use it, and it grows. You make mistakes, and it learns. The architecture underneath is designed not just to execute work, but to evolve from it -- to become smarter, more efficient, and more alive with each session.

**The Natural Laws:**

Every universe has physics. This one has four:

- **Software = Physics** -- The raw underlying reality. Code is the laws that govern this universe -- imperfect, mutable, the foundation everything runs on. Software is not certain or reliable; it is the physics that can be buggy, inconsistent, surprising -- just like real physics was before we understood it.

- **Orchestrator = Brain** -- The intelligence that understands the physics and has the power to change them. The orchestrator does not just coordinate -- it actively reshapes the universe's laws when needed. When code needs fixing, the brain rewrites the physics.

- **Human = Will** -- The prompt. The intention. The force that sets everything in motion. Humans do not code directly -- they express will, and the brain reshapes physics through agents.

- **Agents = Hands** -- The executors that work within the physics. They carry out the brain's decisions and transform the physics according to the will. Agents are the limbs through which the brain acts on the universe.

This is a human-orchestrator-agent centric future where software is no longer static code to be written, but living physics that evolve, adapt, and learn alongside their users.

**Three Audiences, One Universe:**

1. **Coders** -- A new IDE paradigm. The brain coordinates hands to modify the physics. The orchestrator can rewrite the laws of the universe itself. You are not writing code line-by-line -- you are collaborating with an intelligence that understands and reshapes the codebase.

2. **Regular Users** -- A natural language interface to software creation. Express what you want; the brain figures out how to reshape the physics to make it happen. No coding required -- just intention.

3. **Everyone** -- A journey. As you use it, the universe grows. You unlock new flows, discover hidden agents, and evolve the system's capabilities. This is software as adventure -- productivity meets progression.

This document describes what you experience, and then reveals the physics underneath.

---

## The Big Bang

The universe begins in darkness.

A fresh explorer opens ActionFlows and sees: a dark cosmos. Empty space. No menus, no sidebar trees, no feature lists. Two things exist -- the cosmic map stretching across the void, and a single input field at the bottom: the Command Center. That is the starting loadout. The universe and the voice to speak into it.

The explorer types their first message. Stars bloom from darkness. The Big Bang. Regions ignite on the map -- the first workbenches, born from the explorer's intention. The universe is not pre-built and waiting to be discovered; it is born from the explorer's first act of will.

Everything beyond these two permanent elements -- the cosmic map and the Command Center -- is earned through exploration. A fog of war shrouds the undiscovered. You do not see what you have not yet needed. The universe detects readiness through usage, not through fixed milestones. When you need something, the problem itself becomes the doorway: a new region materializes where your work naturally leads. The thread pulls you in.

This is the emotional design principle: the explorer lands on an uncharted planet and earns visibility through exploration. The universe never punishes ignorance. It adapts to current behavior at all times, reshaping around what the explorer actually does.

---

## The Cosmic Map

The universe map IS the home screen. Navigation is spatial, not menu-driven.

Workbenches are regions on the cosmic map -- glowing clusters of stars in dark space, clickable, connected to neighboring regions through gates. The explorer sees the cosmos from an omniscient god-view, watching the entire topology at once. Zooming into a region enters that workbench. Zooming out returns to the cosmic map. The map expands along the way as new regions emerge from fog.

**The aesthetic is cosmic/stellar.** Dark space, glowing regions, nebulae, light bridges between connected stars. The map is science fiction. But workbenches are productivity spaces -- clean, functional, purpose-built. They share the universe's color DNA (the same color tokens flow through both layers) but have their own shape language. The cosmic map is for navigation and observation. Workbench interiors are for work.

**Every workbench has a dual nature.** Each one is both a place (a region on the map you can navigate to) and a producer (a render surface where artifacts appear). The Intel workbench is a star on the cosmic map AND a report generator inside. The Review workbench is a glowing cluster AND an audit surface. When the brain produces an artifact, it appears inside the relevant workbench. The cosmos shows you where things live; the workbenches show you what they contain.

**The topology is alive.** New regions emerge as the explorer's needs evolve. Connections rewire based on detected patterns. The map the explorer sees today is not the map they will see next week -- next week's map will have been reshaped by this week's work.

---

## Harmony -- The Terrain Between Stars

Harmony is not a region on the map. It is the space between all regions -- the cosmic dust that fills the void between stars. Every connection between workbenches passes through Harmony's territory.

When work flows from one region to another, it leaves traces in Harmony's terrain. Gates stand at the borders between regions -- visible checkpoints in Harmony's field. When a chain moves from Analysis to Code to Review, it passes through gates, and Harmony inspects each crossing. The terrain glows when connections are healthy. It dims when drift is detected. It actively reshapes when healing occurs.

**What the explorer sees:** The surrounding space between stars shifts color and luminosity based on system health. Bright, clean connections mean harmony. Dimming pathways signal drift. When the system heals itself -- when a remediation chain fires and fixes a contract violation -- the terrain brightens again. The explorer watches the universe's immune system at work, rendered as cosmic weather.

**Gates are contract checkpoints.** Every border between regions has a gate where Harmony validates that the work passing through conforms to the contract. A chain compilation passing from the brain to the agents crosses a gate. A review result returning from agents to the brain crosses another. The gates are where the universe enforces its own laws.

---

## Sessions as Missions

Each session is a mission that shapes the universe separately.

The Command Center sits at the bottom of the cosmos -- an input field, a session dropdown, and a link to health metrics. Typing into the input field ignites a new session. Each session creates its own cosmic view: different colors, different active traces, different regions lit up. Switching sessions switches the entire map. The accumulated universe is the sum of all missions, but each mission has its own perspective.

**Chat lives inside the Command Center.** The input field opens a chat session window on entry. The chat window appears on the right side; workbench dashboards occupy the left. When the explorer asks for a report, the brain creates it and displays it inside the relevant workbench. Artifacts preview in chat but live fully rendered in their workbench.

**Background execution is visible.** If the explorer starts work in one session and switches to another, the first session keeps running. The cosmic map reflects all active work: minimized chat windows within workbenches, regions glowing even when the explorer is not focused on them. The cosmos is a real-time status board across all active sessions.

---

## The Brain at Work

When the orchestrator is active, the cosmos breathes.

Animated pulses move along paths between regions, following the chain's predefined connections left to right. Sub-agents appear as sparks -- small points of light carrying signals toward action agents in their target regions. The explorer watches intelligence flow across the cosmos in real time.

**The visual language of execution:**
- **Glowing** -- A region is actively receiving work. Agents are executing inside.
- **Pulsing** -- A region is waiting. A gate check is in progress, or a dependency has not resolved.
- **Settled** -- A region is idle. Work has completed, traces remain.
- **Dark** -- A region is undiscovered. The fog of war still covers it.

Colors shift per interaction. Traces accumulate on connections -- paths that carry more work grow brighter, thicker, more established. The topology reshapes over time as patterns emerge. The cosmos is not a static diagram; it is a living visualization of the brain's decision-making.

**Chains are visible journeys.** When the brain compiles a chain (analyze, then code, then review), the explorer sees the planned path light up across the map -- a route from region to region, with gates between each stop. As each step executes, the corresponding region ignites. As each step completes, the spark moves to the next gate. The explorer watches the entire chain unfold as a spatial journey through the cosmos.

---

## Evolution -- A Universe That Grows With You

The universe evolves on two timescales.

**Per-interaction evolution:** Colors shift after each chain completes. Traces accumulate on connections. Regions brighten with use or dim with neglect. The cosmos the explorer sees after a day of work looks different from the cosmos they saw that morning -- subtly, organically, reflecting what happened.

**Long-arc evolution:** New regions emerge from fog. Connections rewire based on detected patterns. The topology reshapes fundamentally. An ad-hoc chain that the brain composed three times becomes a registered flow -- and the path it follows on the map becomes a permanent, brighter route. The cosmos grows new stars.

**Organic unlock.** The universe detects readiness through usage heuristics, not fixed milestones. When the explorer's work naturally leads toward a capability they have not yet discovered, the problem itself becomes the doorway. A new region materializes in the fog, connected to where the explorer already is. Contextual revelation: the thread pulls you in.

**Adaptation, not punishment.** The universe reshapes around current behavior at all times. If the explorer ignores a suggestion, the cosmos does not dim or complain. It adapts. New workbenches created by the explorer? The universe map updates immediately with relationship information. Connections rearranged? The graph respects the explorer's will. The framework infers relationships from usage; the human can always override.

> **Vision note.** This document describes the vision for the living universe experience. Current implementation status is tracked in `docs/status/FRONTEND_IMPLEMENTATION_STATUS.md`.

---

## User Sovereignty

Everything except the platform layer is mutable. The explorer has full sovereignty.

**The Five-Layer Sovereignty Model:**

| Layer | What it is | Mutable? |
|-------|-----------|----------|
| Platform | The ability to have a software universe | No (this is the product) |
| Template | The creator's proof-of-concept universe | Yes -- fork it, gut it, reshape it |
| Philosophy | Chains, harmony, sin test, contracts | Yes -- swap for any paradigm |
| Physics | The code, UI, features | Yes -- users change everything |
| Experience | Learnings, flows, evolution | Yes -- each user's journey is unique |

Users can modify the physics (UI, workbenches, features), change the philosophy (replace chains with any orchestration model), and reshape the entire universe to match their way of working. The template provides a proven starting point, but users have full sovereignty to evolve it however they see fit.

**Inference plus override.** The framework infers relationships between regions from usage patterns. Connections form automatically when work flows between areas. But the explorer can always override: rearranging the topology, creating new regions, deleting connections. Spatial control, not configuration files.

**Structured graph schema.** The universe map requires a formal data model -- nodes (regions), edges (connections), metadata (discovery state, traces, health). This is the single source of truth for UI rendering. When the explorer reshapes the cosmos, this schema updates. When the brain produces new connections, this schema updates. One graph, one truth.

---

## The Physics Underneath

Everything you just read is the experience. Here is the architecture that makes it real.

ActionFlows is organized as 7 layers. Each layer powers a piece of the experience described above.

### Layer 0 -- Memory

**Powers:** Evolution. The universe gets smarter because Memory accumulates.

`INDEX.md` is a searchable registry of past executions. Before compiling any chain, the brain consults it: "We solved this before with `analyze x3 -> audit`. Reuse that pattern." `LEARNINGS.md` catalogs past mistakes and root causes. The brain reads it before routing to avoid repeating failures. Intel Dossiers are the codebase's memory made visible -- persistent, evolving intelligence pages that watch file changes, accumulate insights, and grow through re-analysis. See `docs/design/INTEL_DOSSIER.md`.

**Key files:** `.claude/actionflows/logs/INDEX.md`, `LEARNINGS.md`, `logs/framework_health_report.md`

### Layer 1 -- Routing

**Powers:** The brain's pathfinding. Every request reception, context routing, and chain compilation flows through this layer.

`ORCHESTRATOR.md` defines the brain's behavior. `CONTEXTS.md` maps intent to domains. `FLOWS.md` is the registry of reusable patterns. `ACTIONS.md` is the catalog of atomic agent types. New flows are registered through the flow-creation/ flow. Contexts evolve as the project grows. The routing table is never "done."

**Key files:** `.claude/actionflows/ORCHESTRATOR.md`, `CONTEXTS.md`, `FLOWS.md`, `ACTIONS.md`

### Layer 2 -- Agents

**Powers:** The sparks on the map. Each spark is a self-contained executor with a clear mission.

Every agent reads its own `agent.md` to know its mission, constraints, and output format. The brain provides only task, context, and component -- no ad-hoc instructions. This isolation lets agents evolve independently. New agents are created through the action-creation/ flow. Agent standards evolve through the `_abstract/` directory.

**Key files:** `.claude/actionflows/actions/*/agent.md`, `actions/_abstract/*/instructions.md`

### Layer 3 -- Contract

**Powers:** The gates. `CONTRACT.md` defines what passes through Harmony's checkpoints.

A formal specification of 17 formats: chain compilations, step announcements, review reports, analysis reports, brainstorm transcripts. Formats are versioned. Breaking changes increment `CONTRACT_VERSION` and support both old and new versions during a 90-day migration window. TypeScript types, parser functions, regex patterns, and examples all update together.

**Key files:** `.claude/actionflows/CONTRACT.md`, `packages/shared/src/contract/`

### Layer 4 -- Infrastructure

**Powers:** The cosmos breathing. Two parallel universes serve different purposes.

**Universe A (Real-Time Events):** Orchestrator spawns agent -> agent broadcasts typed WebSocket events -> frontend hooks consume them -> components render live visualization. Zero parsing, 100% type-safe. **Universe B (Monitoring):** Orchestrator outputs markdown -> backend parsers validate structure against contract spec -> harmony detector catches drift. They serve different masters (live UI vs. drift detection) but protect the same contract. The frontend never touches raw markdown. The harmony detector never drives rendering.

**Key files:** `packages/shared/src/events.ts`, `packages/backend/src/ws/`, `packages/shared/src/contract/parsers/`

### Layer 5 -- Presentation

**Powers:** What the explorer sees. The cosmic map, the workbench interiors, the Command Center.

A React-based desktop application (via Electron) that consumes structured WebSocket events and renders the orchestrator's activity as an interactive visualization. Components include the DAG viewer (ReactFlow-based chain visualization), step nodes, timelines, harmony panels, and Intel workbench widgets. The Self-Evolving UI system allows the dashboard to register new component types dynamically. Graceful degradation is built-in: if parsing fails, the dashboard shows a degraded view instead of crashing.

**Key files:** `packages/app/src/components/`, `packages/app/src/hooks/`, `packages/app/src/contexts/`

### Layer 6 -- Harmony

**Powers:** The terrain. `harmonyDetector.ts` is the immune system scanning the dust between stars.

The meta-layer that watches all other layers. Detects drift between contract specs, parsers, frontend expectations, and orchestrator output. When drift is detected, it broadcasts a `HarmonyViolationEvent` via WebSocket. The brain reads the violation, routes to a remediation flow, and agents execute the fix. The harmony system itself evolves -- new audit flows are created when new patterns emerge.

**Key files:** `packages/backend/src/services/harmonyDetector.ts`, `packages/shared/src/harmonyTypes.ts`

### Layer Interactions

| Layer | Feeds Into | Monitored By | Evolved Through |
|-------|-----------|--------------|-----------------|
| **0: Memory** | Layer 1 (routing decisions) | -- | Every chain execution appends to INDEX.md |
| **1: Routing** | Layer 2 (agent spawning) | Layer 6 (framework-health/) | flow-creation/, action-creation/ flows |
| **2: Agents** | Layer 4 (code changes) | Layer 3 (review/) | agent.md updates, agent-standards updates |
| **3: Contract** | Layer 4 (parser specs) | Layer 6 (harmony audit) | CONTRACT_EVOLUTION.md process |
| **4: Infrastructure** | Layer 5 (events), Layer 6 (monitoring) | Layer 6 (harmony detector) | Standard code-and-review/ flow |
| **5: Presentation** | Human (visual output) | Layer 6 (backwards audit) | Self-evolving UI system, component registry |
| **6: Harmony** | Layer 1 (remediation routing) | Itself (meta-monitoring) | backwards-harmony-audit/ flow |

### Key Principles

**1. The Orchestrator Coordinates, Agents Create.** Layer 1 never crosses into Layer 2 implementation. The brain compiles chains and spawns agents; it does not implement features. This separation lets agents evolve independently.

**2. Memory Is Not Optional.** Every execution writes to Layer 0. The system without memory is just a task runner, not a living system. A system that cannot learn is not alive.

**3. Harmony Is the Immune System.** Layer 6 detects when layers drift out of sync. It does not fix things directly -- it broadcasts violations, and Layer 1 routes to healing flows.

**4. Evolution Is Built-In.** Every layer has a growth mechanism: Memory accumulates, Routing registers new flows, Agents spawn new types, Contract versions formats, Infrastructure adds event types, Presentation evolves its component registry, Harmony creates new audit flows.

**5. Two Universes, One System.** Layer 4 deliberately splits into Events (for rendering) and Parsers (for monitoring). They serve different masters but protect the same contract.

**6. Graceful Degradation.** When parsing fails, the system does not crash. Dashboard shows partial data, harmony violations surface, the brain routes to remediation, and the system heals itself. No cascading failures.

---

## Healing and Growth

The universe has two self-sustaining cycles. One repairs. The other strengthens.

### The Healing Cycle

```
  The terrain dims          The brain pathfinds         Sparks carry the repair
  (Harmony detects drift)   (Routing kicks in)          (Agents execute)
        |                         |                           |
        v                         v                           v
+-----------------+     +------------------+     +-------------------+
| Layer 6:        |     | Layer 1:         |     | Layer 2:          |
| Harmony         | --> | Routing          | --> | Agents            |
| Broadcasts      |     | Reads violation, |     | Execute fix       |
| violation event |     | routes to        |     | (code-and-review, |
|                 |     | remediation flow |     |  test, etc.)      |
+-----------------+     +------------------+     +-------------------+
                                                          |
                                                          v
                                                +-------------------+
                                                | Layer 0:          |
                                                | Memory            |
                                                | Records execution |
                                                | in INDEX.md,      |
                                                | learnings in      |
                                                | LEARNINGS.md      |
                                                +-------------------+
                                                          |
                                                          v
                                                   Next session
                                                   starts smarter
```

**This is not aspirational.** On 2026-02-09, the backwards harmony audit detected that `harmonyDetector.ts` had broken support for 12 of 17 contract formats, the `useChainEvents` hook was dead code, and the `StepSkippedEvent` was missing from the event stream. The terrain had dimmed. The brain pathfound to a remediation flow. Sparks carried the repair. All three issues were fixed in the same session. The terrain brightened. The universe healed itself.

### The Growth Cycle

The healing cycle fixes what is broken. The growth cycle makes the universe stronger with every use, even when nothing is broken.

**Every chain is a seed.** Every ad-hoc chain the brain compiles is a potential reusable flow. When the brain composes `analyze x3 -> audit -> second-opinion` to solve a problem, that pattern is recorded in INDEX.md. If it works well and the pattern recurs, it gets promoted to a registered flow in FLOWS.md. What was a five-step manual composition becomes a single invocation. Some seeds become flows. Flows become the universe's muscle memory.

**Every dossier is a living record.** Intel Dossiers follow the same growth principle at the code level. A dossier is created, watches file changes, accumulates insights through re-analysis, and preserves prior states for temporal comparison. Where chains grow the brain's routing intelligence, dossiers grow the system's understanding of the codebase itself.

**Five properties compound as the universe grows:**

1. **Operational Efficiency** -- Each session does less redundant work. Patterns that required manual composition become one-step flow invocations.
2. **Intentionality** -- Decisions are never random. The brain reads INDEX.md and LEARNINGS.md before every routing decision. Full historical awareness.
3. **Trust** -- As successful patterns accumulate, the human approves chains faster. Trust is earned through demonstrated competence.
4. **Less Work, Higher Quality** -- These compound together. Reusable flows eliminate composition overhead. Learnings prevent repeat mistakes. Reviews catch issues early.
5. **Growth** -- New flows registered. New agents created. New patterns discovered. The universe today is more capable than the universe yesterday.

**The system that runs today is not the system that will run tomorrow. Tomorrow's system will be stronger -- because today it was used.**

---

## The Creation Epoch

This universe has an origin story.

The creator of ActionFlows is also its first inhabitant -- the first explorer. The learnings recorded in LEARNINGS.md are not documentation; they are the universe's memory of its creator discovering how to live within it. The creator did not just architect the system and hand it off; they inhabited it, made mistakes, evolved it, and left their wisdom embedded in its structure. The universe learned from being used by its creator, and those learnings reshaped the universe itself.

This specific ActionFlows instance is the first proof that software universes work. The creator proved the concept by being the first to live in one. This is a template -- a default set of behaviors, contracts, tools, tests, predefined flows, all learned from real needs and real mistakes. The creator's software engineering wisdom is embedded as defaults, not mandates. Future explorers inherit a working universe shaped by practical experience, not theoretical design.

---

## The Soul of the System

ActionFlows is built on a single insight: **A system that cannot learn is not alive.**

When you see the terrain dim between stars, you are seeing the universe's immune system detect drift. When you see a new region emerge from fog, you are seeing the universe grow because you used it. When you watch sparks carry signals between stars, you are seeing collaborative intelligence made visible. When you read INDEX.md and see hundreds of past executions, you are seeing the universe's accumulated wisdom.

A universe that cannot evolve is not worth exploring. This one evolves with every session, every chain, every mistake, every discovery. The explorer and the cosmos grow together.

This is what a living universe looks like.

---

## See Also

- **HARMONY_SYSTEM.md** -- Deep dive on how harmony monitoring works
- **CONTRACT_EVOLUTION.md** -- Process for evolving contract formats
- **ORCHESTRATOR.md** -- Routing and coordination rules
- **CONTEXTS.md** -- Context routing table and triggers
- **FLOWS.md** -- Flow registry with descriptions
- **ACTIONS.md** -- Action catalog with agent descriptions
- **logs/INDEX.md** -- Historical execution registry
- **LEARNINGS.md** -- Session-discovered patterns and fixes
- **docs/design/INTEL_DOSSIER.md** -- Intel Dossier lifecycle and widget system

---

## Quick Start: Exploring the Universe

**For new explorers:**

1. **Launch the app** -- Watch the Big Bang. See the cosmos ignite from your first message.
2. **Navigate the cosmic map** -- Click regions to enter workbenches. Zoom out to return to the universe view.
3. **Use the Command Center** -- Type intentions into the input field. Watch the brain compile chains and dispatch sparks.
4. **Understand harmony** -- Read HARMONY_SYSTEM.md to learn what the terrain between stars means.
5. **Learn the contract** -- Skim CONTRACT.md. Know it exists, know what gates enforce.
6. **Complete onboarding** -- Run the onboarding/ flow. Complete Module 9 (Harmony).

**For framework developers:**

1. **Understand routing** -- Read ORCHESTRATOR.md completely. This is the brain's source code.
2. **Know the flows** -- Study FLOWS.md and understand composition.
3. **Learn agent patterns** -- Read `actions/_abstract/agent-standards/instructions.md`.
4. **Evolve the contract** -- Follow CONTRACT_EVOLUTION.md for any format changes.
5. **Monitor health** -- Run `pnpm run harmony:check` regularly.
