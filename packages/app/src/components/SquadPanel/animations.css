/**
 * SquadPanel Animations
 * CSS keyframes and transitions for agent character animations
 *
 * Design: Studio Ghibli motion principles + Persona 5 UI aesthetic
 * Performance: GPU-accelerated transforms and opacity only
 * Accessibility: Respects prefers-reduced-motion
 */

/* ===== CSS CUSTOM PROPERTIES (EASING FUNCTIONS) ===== */

:root {
  /* Natural ease for gentle floating motions */
  --ease-natural: cubic-bezier(0.25, 0.8, 0.25, 1);

  /* Ghibli-style ease for smooth, deliberate movements */
  --ease-ghibli: cubic-bezier(0.4, 0.0, 0.2, 1);

  /* Bounce for playful interactions */
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ===== IDLE STATE ANIMATIONS ===== */

/* Gentle float - slow bobbing motion */
@keyframes agent-float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-8px);
  }
}

/* Subtle blink - eye closing effect */
@keyframes agent-blink {
  0%, 90%, 100% {
    opacity: 1;
  }
  95% {
    opacity: 0;
  }
}

/* ===== THINKING STATE ANIMATIONS ===== */

/* Sway motion - contemplative back-and-forth */
@keyframes agent-sway {
  0%, 100% {
    transform: rotate(-2deg);
  }
  50% {
    transform: rotate(2deg);
  }
}

/* ===== WORKING STATE ANIMATIONS ===== */

/* Active pulse - rhythmic breathing effect */
@keyframes agent-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

/* ===== SUCCESS STATE ANIMATIONS ===== */

/* Sparkle burst - celebratory pop */
@keyframes agent-sparkle {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ===== ERROR STATE ANIMATIONS ===== */

/* Jolt + recover - shake and settle */
@keyframes agent-jolt {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-10px);
  }
  50% {
    transform: translateX(10px);
  }
  75% {
    transform: translateX(-5px);
  }
  100% {
    transform: translateX(0);
  }
}

/* ===== SPAWNING STATE ANIMATIONS ===== */

/* Materialize fade-in - appearing from nothing */
@keyframes agent-spawn {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* ===== AURA PULSE ANIMATIONS ===== */

/* Idle aura - dim, slow pulse */
@keyframes aura-pulse-idle {
  0%, 100% {
    opacity: 0.3;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.1);
  }
}

/* Active aura - bright, steady pulse */
@keyframes aura-pulse-active {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.15);
  }
}

/* Error aura - frantic flicker */
@keyframes aura-pulse-error {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

/* ===== LOG PANEL ANIMATIONS ===== */

/* Expand animation - unfold downward (GPU-accelerated) */
@keyframes log-panel-expand {
  from {
    transform: scaleY(0);
    opacity: 0;
  }
  to {
    transform: scaleY(1);
    opacity: 1;
  }
}

/* Collapse animation - fold upward (GPU-accelerated) */
@keyframes log-panel-collapse {
  from {
    transform: scaleY(1);
    opacity: 1;
  }
  to {
    transform: scaleY(0);
    opacity: 0;
  }
}

.log-panel {
  transform-origin: top;
}

/* ===== HOVER ANIMATIONS ===== */

/* Hover scale - smooth zoom in */
@keyframes agent-hover {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(1.1);
  }
}

/* ===== PROGRESS BAR ANIMATIONS ===== */

/* Progress bar fill - smooth scale transition (GPU-accelerated) */
@keyframes progress-fill {
  from {
    transform: scaleX(0);
  }
  to {
    transform: scaleX(1);
  }
}

.progress-fill {
  transform-origin: left;
}

/* Progress shimmer - active work indicator */
@keyframes progress-shimmer {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* ===== ACCESSIBILITY: REDUCED MOTION ===== */

@media (prefers-reduced-motion: reduce) {
  /* Disable all animations except essential UI feedback */
  .agent-avatar,
  .agent-aura,
  .avatar-character,
  .log-panel,
  .agent-character-card {
    animation: none !important;
    transition: opacity var(--duration-normal) var(--ease-in-out), transform var(--duration-normal) var(--ease-in-out);
  }

  /* Keep only scale transform for click/hover feedback */
  .agent-character-card:hover {
    transform: scale(1.05);
    transition: transform var(--duration-normal) var(--ease-in-out);
  }

  /* Keep progress bar transitions for usability */
  .progress-fill {
    transition: width var(--duration-slow) var(--ease-in-out);
  }
}
